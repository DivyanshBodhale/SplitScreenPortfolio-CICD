pipeline {
  agent { label 'olex'} 
    stages {
        stage("Code Clone ") {
            steps {
                echo"Code Clone started"
                git url:"https://github.com/DivyanshBodhale/SplitScreenPortfolio.git", branch:"main"
            } 
        }
        stage("test") {
            steps {
                 echo "test Commit"
                echo"This stage will test the code quality"
            } 
        }
        stage("Push To DockerHub") {
            steps {
                echo"image Building stated"
                withCredentials([usernamePassword(
                    'credentialsId':'DockerHubCred',
                    'passwordVariable':'DockerHubPass',
                    'usernameVariable':'DockerHubUser')]){
                sh "docker login -u ${env.DockerHubUser} -p ${env.DockerHubPass} "
                sh   "docker build -t split-portfolio ."
                sh "docker image tag split-portfolio ${env.DockerHubUser}/split-portfolio:latest"
                sh "docker push ${env.DockerHubUser}/split-portfolio:latest"
                }
            } 
        }
        stage("Deployement") {
            steps {
                echo "this will deploye the code"
                sh"docker compose up -d"
                echo "testing jenkins file triger"
            } 
        }
    }
}
